##一些记录

数据方面：  
　　TODO:图标签太密集
<br/>
　　TODO:特征有分类型，有浮点型，要分开处理
<br/>
　　TODO:缺失值填充，归一化以后，onehot前，填充众数或者均值
<br/>
　　TODO:分类型数据onehot以后，列数较多，可以单独对分类型数据降维
<br/>
　　TODO:连续型数据先归一化，再分桶离散化，再onehot，使全部特征统一离散化
<br/>
　　TODO:这样一来，全部特征都公平地进行特征选择
<br/>
　　TODO:可以把分类型数据先输入到MLP中，得到一个embedding,相当于降维了
<br/>
　　TODO:删除离群点
<br/>
　　TODO:数据偏态分布（skewed）了，导致离群点是分散的，而且AUC高，F1低。但是box-cox以后并未好转？
<br/>
　　TODO:PCA，因子分析，关联性，GA，随机森林，其他方法并结合。
<br/>
　　TODO:特征工程顺序---数据清洗，（离群点），正态化，标准化，归一化，特征选择
<br/>
　　TODO:应该加入【利润表、负债表、现金流量表】，考虑是否用业绩快报代替现在的财务指标数据
<br/>
　　TODO:可以尝试不onehot，只要特征值之间的距离计算计算得合理，那么使用label encoding也没有问题。
<br/>
<br/>
<br/>

模型方面：  
<br/>
<br/>

关于当前尝试的特征工程方法的一些思考：  
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

可视化方面，收益率的算法解释，模型评价方面：
<br/>
　　1.首页的4个饼图的“正负股票数量”，指的都是真值为正或负的数量，不同点只是，推荐股票组合和真实股票排序topn涉及到的股票codee不同，所以对应的正负比例不同，根据该对比图能看出推荐的组合是不是靠谱，如果推荐出来的正股票比较多，那就是靠谱。
<br/>
　　2.首页饼图用到的数据，超额收益和真实收益读取的方式是分开的，推荐过程中的origin_super_data_set中的Y是超额收益，可以直接使用，它是使用New_Label2目录下csv中的s_pct_change - b_pct_change计算得到的，其中s_pct_change为真实收益率，b_pct_change为指数收益率。优于训练过程中用到的都是超额收益，所以真是收益率只能去s_pct_change读取（读取时需要对应的日期）。
<br/>
　　3.为什么首页的饼图上显示真实股票排序的收益全是正的，但是真实排序算出来的收益还是负的？（需要验证）（代码中所有计算出来的收益率都是采取“每个股票买1股”的方案计算的，当每个股票的真实收益都是正的的情况下，算出来的）
<br/>
　　　　上述问题的验证中，发现真实收益率并没有错误，当topn真实股票的收益率全为正时，计算出来的模拟交易收益率也一定为正，并且随着topn的增大，收益率逐渐减少，原因是每支股票买一股的方案，如果只买最优秀的当然收益率最高，前后都买则会导致收益率降低。
<br/>
　　　　当使用每支股票买1000元的策略时，则收益率不一定随着topn的增大，收益率逐渐减少，原因是每支股票的购买价格不同，也许top1的股票的购价很高，导致买到的股数很少，即使涨的多，但是总收益也许是小于后面的股票的。所以使用这样的购买策略会引入新的变量，不适合衡量本问题，所以没有采用。
<br/>
　　　　但是真实超额收益率随着topn的增加而增加，？？？
<br/>
　　在对推荐结果进行评估时，有topn和全局两种规格。topn是针对推荐出来的股票的，而全局是所有样本都参加评价。为了推荐，我们的样本score都被归一化为了0到1之间的数字，但是为了计算precision等指标，需要存在“正负例”之分，所以我们在全局评价时认为，score高于0.5的才应该被推荐，可以理解为将score归一化到-1到1之间，然后只推荐大于0的股票（超额收益的值大于0的股票也是同义）。
<br/>